local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/ionlyusegithubformcmods/1-Line-Scripts/main/Mobile%20Friendly%20Orion')))()
local Player = game.Players.LocalPlayer
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local UIS = game:GetService("UserInputService")
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")
local setclipboard = setclipboard or function(text)
    if syn then
        syn.write_clipboard(text)
    elseif clipboard_set then
        clipboard_set(text)
    else
        print("Clipboard not supported. Link: https://discord.gg/YCe6ZtVKXW")
    end
end

-- Copy Discord link and open on script start
setclipboard("https://discord.gg/YCe6ZtVKXW")
spawn(function()
    if syn and syn.request then
        syn.request({Url = "http://www.roblox.com/games/place?id=" .. game.PlaceId .. "&linkId=" .. HttpService:GenerateGUID(false), Method = "GET"})
    else
        game:HttpGet("https://discord.gg/YCe6ZtVKXW")
    end
end)
OrionLib:MakeNotification({
    Name = "Discord Link",
    Content = "Discord link copied to clipboard and opened!",
    Image = "rbxassetid://4483345998",
    Time = 5
})

local Window = OrionLib:MakeWindow({
    Name = "99 Nights in the Forest üî¶ [üëΩALIENS]",
    HidePremium = false,
    SaveConfig = true,
    ConfigFolder = "OrionTest",
    IntroText = "Loading Script..."
})

OrionLib:MakeNotification({
    Name = "Logged In!",
    Content = "Enjoy " .. Player.Name .. "!",
    Image = "rbxassetid://4483345998",
    Time = 5
})

-- ======= MAIN TAB =======
local MainTab = Window:MakeTab({
    Name = "Main",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

MainTab:AddTextbox({
    Name = "üèÉ WalkSpeed",
    Default = "16",
    TextDisappear = true,
    Callback = function(Value)
        local humanoid = Player.Character and Player.Character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.WalkSpeed = tonumber(Value) or 16
        end
    end
})

MainTab:AddTextbox({
    Name = "ü¶ò JumpPower",
    Default = "50",
    TextDisappear = true,
    Callback = function(Value)
        local humanoid = Player.Character and Player.Character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.JumpPower = tonumber(Value) or 50
        end
    end
})

MainTab:AddToggle({
    Name = "üå´Ô∏è No Fog",
    Default = false,
    Callback = function(Value)
        game:GetService("Lighting").FogEnd = Value and 1e10 or 1000
    end
})

MainTab:AddToggle({
    Name = "üí° FullBright",
    Default = false,
    Callback = function(Value)
        local Lighting = game:GetService("Lighting")
        if Value then
            Lighting.Brightness = 2
            Lighting.ClockTime = 12
            Lighting.FogEnd = 1e10
            Lighting.GlobalShadows = false
            Lighting.OutdoorAmbient = Color3.fromRGB(255, 255, 255)
        else
            Lighting.Brightness = 1
            Lighting.ClockTime = 14
            Lighting.FogEnd = 1000
            Lighting.GlobalShadows = true
            Lighting.OutdoorAmbient = Color3.fromRGB(128, 128, 128)
        end
    end
})

local flying = false
local flySpeed = 50
local flyBodyGyro, flyBodyVelocity

local function startFlying()
    local character = Player.Character
    local root = character and character:FindFirstChild("HumanoidRootPart")
    if not root then return end

    flyBodyGyro = Instance.new("BodyGyro", root)
    flyBodyGyro.P = 9e4
    flyBodyGyro.maxTorque = Vector3.new(9e9, 9e9, 9e9)
    flyBodyGyro.cframe = root.CFrame

    flyBodyVelocity = Instance.new("BodyVelocity", root)
    flyBodyVelocity.velocity = Vector3.new()
    flyBodyVelocity.maxForce = Vector3.new(9e9, 9e9, 9e9)

    RunService:BindToRenderStep("FlyLoop", Enum.RenderPriority.Input.Value, function()
        local camCF = Workspace.CurrentCamera.CFrame
        local dir = Vector3.zero

        if UIS:IsKeyDown(Enum.KeyCode.W) then dir += camCF.LookVector end
        if UIS:IsKeyDown(Enum.KeyCode.S) then dir -= camCF.LookVector end
        if UIS:IsKeyDown(Enum.KeyCode.A) then dir -= camCF.RightVector end
        if UIS:IsKeyDown(Enum.KeyCode.D) then dir += camCF.RightVector end
        if UIS:IsKeyDown(Enum.KeyCode.Space) then dir += Vector3.yAxis end
        if UIS:IsKeyDown(Enum.KeyCode.LeftControl) then dir -= Vector3.yAxis end

        flyBodyVelocity.Velocity = dir.Unit * flySpeed
        flyBodyGyro.CFrame = camCF
    end)
end

local function stopFlying()
    RunService:UnbindFromRenderStep("FlyLoop")
    if flyBodyGyro then flyBodyGyro:Destroy() end
    if flyBodyVelocity then flyBodyVelocity:Destroy() end
end

MainTab:AddToggle({
    Name = "üïäÔ∏è Fly Mode",
    Default = false,
    Callback = function(Value)
        flying = Value
        if flying then
            startFlying()
        else
            stopFlying()
        end
    end
})

-- ======= MISC TAB =======
local MiscTab = Window:MakeTab({
    Name = "Misc",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

local antiAFK = false
local fpsBoost = false
local spinBot = false

MiscTab:AddButton({
    Name = "Auto Rejoin",
    Callback = function()
        local success, err = pcall(function()
            TeleportService:Teleport(game.PlaceId, Player)
        end)
        OrionLib:MakeNotification({
            Name = success and "Rejoin" or "Rejoin Failed",
            Content = success and "Attempting to rejoin the server..." or "Error: " .. tostring(err),
            Image = "rbxassetid://4483345998",
            Time = 3
        })
    end
})

MiscTab:AddToggle({
    Name = "Anti-AFK",
    Default = false,
    Callback = function(Value)
        antiAFK = Value
        if antiAFK then
            spawn(function()
                while antiAFK do
                    task.wait(30)
                    local virtualUser = game:GetService("VirtualUser")
                    virtualUser:CaptureController()
                    virtualUser:ClickButton2(Vector2.new())
                end
            end)
        end
        OrionLib:MakeNotification({
            Name = "Anti-AFK",
            Content = "Anti-AFK " .. (antiAFK and "enabled" or "disabled"),
            Image = "rbxassetid://4483345998",
            Time = 3
        })
    end
})

MiscTab:AddButton({
    Name = "Server Hop",
    Callback = function()
        local servers = {}
        local req = HttpService:GetAsync("https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public?sortOrder=Asc&limit=100")
        local data = HttpService:JSONDecode(req)
        for _, server in pairs(data.data) do
            if server.playing < server.maxPlayers and server.id ~= game.JobId then
                table.insert(servers, server.id)
            end
        end
        if #servers > 0 then
            local randomServer = servers[math.random(1, #servers)]
            TeleportService:TeleportToPlaceInstance(game.PlaceId, randomServer, Player)
            OrionLib:MakeNotification({
                Name = "Server Hop",
                Content = "Hopping to a new server...",
                Image = "rbxassetid://4483345998",
                Time = 3
            })
        else
            OrionLib:MakeNotification({
                Name = "Server Hop Failed",
                Content = "No available servers found.",
                Image = "rbxassetid://4483345998",
                Time = 3
            })
        end
    end
})

MiscTab:AddToggle({
    Name = "FPS Booster",
    Default = false,
    Callback = function(Value)
        fpsBoost = Value
        local Lighting = game:GetService("Lighting")
        if fpsBoost then
            settings().Rendering.QualityLevel = 1
            Lighting.GlobalShadows = false
            Lighting.FogEnd = 9e9
        else
            settings().Rendering.QualityLevel = 6
            Lighting.GlobalShadows = true
            Lighting.FogEnd = 100000
        end
        OrionLib:MakeNotification({
            Name = "FPS Booster",
            Content = fpsBoost and "FPS Booster enabled" or "FPS Booster disabled",
            Image = "rbxassetid://4483345998",
            Time = 3
        })
    end
})

MiscTab:AddToggle({
    Name = "Spin Bot",
    Default = false,
    Callback = function(Value)
        spinBot = Value
        if spinBot and Player.Character and Player.Character:FindFirstChild("HumanoidRootPart") then
            spawn(function()
                while spinBot do
                    local root = Player.Character.HumanoidRootPart
                    root.CFrame = root.CFrame * CFrame.Angles(0, math.rad(5), 0)
                    task.wait(0.01)
                end
            end)
        end
        OrionLib:MakeNotification({
            Name = "Spin Bot",
            Content = spinBot and "Spin Bot enabled" or "Spin Bot disabled",
            Image = "rbxassetid://4483345998",
            Time = 3
        })
    end
})

-- ======= CREDITS TAB =======
local CreditsTab = Window:MakeTab({
    Name = "Credits",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

CreditsTab:AddLabel("Scripted by Javindra.")
CreditsTab:AddLabel("Founded by merquryhub.")
CreditsTab:AddButton({
    Name = "Join Discord Server",
    Callback = function()
        setclipboard("https://discord.gg/YCe6ZtVKXW")
        OrionLib:MakeNotification({
            Name = "Discord Link",
            Content = "Link copied to clipboard! Opening Discord invite...",
            Image = "rbxassetid://4483345998",
            Time = 3
        })
        spawn(function()
            if syn and syn.request then
                syn.request({Url = "http://www.roblox.com/games/place?id=" .. game.PlaceId .. "&linkId=" .. HttpService:GenerateGUID(false), Method = "GET"})
            else
                game:HttpGet("https://discord.gg/YCe6ZtVKXW")
            end
        end)
    end
})

OrionLib:Init()
